
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Serverless - Making lambda deployments easy</title>
    <meta name="description" content="">
	
	<meta name="google-site-verification" content="mV9dWaG3eoW-q9NUnP6RKamBZn6R1_dtO0ojaj99Vb0">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=a8cb9de651">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">

    <link rel="canonical" href="http://headly48.github.io/severless-making-lambda-deployments-easy/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="http://headly48.github.io/severless-making-lambda-deployments-easy/amp/">
    
    <meta property="og:site_name" content="Josh's Tech Blog">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Serverless - Making lambda deployments easy">
    <meta property="og:description" content="In my last post I worked on my first lambda function and went through the process of manually setting up the function, gateway and roles. While this works it does slow down development considerably and I can see it quickly becoming a pain in the arse especially when dealing with">
    <meta property="og:url" content="http://headly48.github.io/severless-making-lambda-deployments-easy/">
    <meta property="article:published_time" content="2016-11-26T15:22:10.000Z">
    <meta property="article:modified_time" content="2016-11-30T09:49:45.000Z">
    <meta property="article:tag" content="AWS Lambda">
    <meta property="article:tag" content="Serverless">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Serverless - Making lambda deployments easy">
    <meta name="twitter:description" content="In my last post I worked on my first lambda function and went through the process of manually setting up the function, gateway and roles. While this works it does slow down development considerably and I can see it quickly becoming a pain in the arse especially when dealing with">
    <meta name="twitter:url" content="http://headly48.github.io/severless-making-lambda-deployments-easy/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Joshua Head">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="AWS Lambda, Serverless">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Josh&#x27;s Tech Blog",
        "logo": "http://headly48.github.io/ghost/img/ghosticon.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "Joshua Head",
        "url": "http://headly48.github.io/author/joshua/",
        "sameAs": [],
        "description": "Full stack developer in Melbourne Australia. Interested in learning new skills and working on new challenges"
    },
    "headline": "Serverless - Making lambda deployments easy",
    "url": "http://headly48.github.io/severless-making-lambda-deployments-easy/",
    "datePublished": "2016-11-26T15:22:10.000Z",
    "dateModified": "2016-11-30T09:49:45.000Z",
    "keywords": "AWS Lambda, Serverless",
    "description": "In my last post I worked on my first lambda function and went through the process of manually setting up the function, gateway and roles. While this works it does slow down development considerably and I can see it quickly becoming a pain in the arse especially when dealing with",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://headly48.github.io"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="Josh's Tech Blog" href="http://headly48.github.io/rss/">
</head>
<body class="post-template tag-aws-lambda tag-serverless nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home" role="presentation"><a href="http://headly48.github.io/">Home</a></li>
    </ul>
        <a class="subscribe-button icon-feed" href="http://headly48.github.io/rss/">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-aws-lambda tag-serverless">

        <header class="post-header">
            <h1 class="post-title">Serverless - Making lambda deployments easy</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2016-11-26">26 November 2016</time>  on <a href="../tag/aws-lambda/">AWS Lambda</a>, <a href="../tag/serverless/">Serverless</a>
            </section>
        </header>

        <section class="post-content">
            <p>In my last post I worked on my first lambda function and went through the process of manually setting up the function, gateway and roles. While this works it does slow down development considerably and I can see it quickly becoming a pain in the arse especially when dealing with different environment's when releasing changes.</p>

<p>In comes <a href="https://serverless.com/">Serverless</a> which is a framework to help you develop and deploy serverless architectures in AWS. It's built on Node.js and currently only supports python and node runtime environment's however the others are in the works.</p>

<p>It sounds fairly decent so thought I'd try it out by switching the lorem-lipsum function I created in my last <a href="https://headly48.github.io/aws-creating-my-first-lambda-function/">post</a> to use it.</p>

<p>First up I installed the framework using npm following the instructions <a href="https://www.npmjs.com/package/serverless">here</a></p>

<p>Once installed I created the serverless.yml file with the following settings</p>

<pre><code>service: lorem-lipsum-serverless

frameworkVersion: "=1.2.1"

provider:  
  name: aws
  runtime: nodejs4.3
  memorySize: 128 

functions:  
  getLoremIpsum:
    handler: handler.getLoremIpsum
    events:
       - http:
           path: lorem
           method: get
</code></pre>

<p>With this file i'm creating the http endpoint '/lorem' which is mapped to the function getLoremIpsum which is below </p>

<p><img src="../content/images/2016/11/firstCode.JPG" alt=""></p>

<p>I'v now got the mappings and function but before I can deploy I need to create an AWS user that has all the permissions required to create and delete the stacks.</p>

<p>I added the json that I used to create the 6 policy's that I have added to my user <a href="https://github.com/headly48/blog-samples/tree/master/lorem-lipsum-serverless/policys">here</a> once done I set my awscli to use the user I just created.</p>

<p>I'v now got my mappings, the function and all the permissions I need so now time to deploy it!</p>

<p>This is as easy as running the command <code>serverless deploy</code> <br>
<img src="../content/images/2016/11/Deploying.JPG" alt=""></p>

<p>And the result</p>

<p><img src="../content/images/2016/11/firstResponse.JPG" alt=""></p>

<p>Hmm but now I wanted to make a change to the function to return a different response. After making the code changes and re-running the command it has been updated</p>

<p><img src="../content/images/2016/11/secondResponse.JPG" alt=""></p>

<p>By default when running <code>serverless deploy</code> it stages it as dev so now that the response is all good I wish to deploy it to prod</p>

<p><code>serverless deploy --stage prod</code></p>

<p><img src="../content/images/2016/11/prod.JPG" alt=""></p>

<p>I now have two different environments so that I can make code changes to dev and test them without effecting prod.</p>

<p>After running <code>serverless deploy</code> again my dev env reflects the changes</p>

<p><img src="../content/images/2016/11/devTextNew.JPG" alt=""></p>

<p>While the prod env is still returning the same response as what I deployed earlier.</p>

<p>Once finished It's just as easy to tear down and delete all traces of the stack by running the command <br>
<code>serverless remove</code></p>

<p><img src="../content/images/2016/11/removal.JPG" alt=""></p>

<p>While this was a fairly simple and small test the serverless framework does appear to do the job in helping to deploy the stacks with different stages and i'll be using it in the future :D.</p>

<p>The sample code can be found <a href="https://github.com/headly48/blog-samples/tree/master/lorem-lipsum-serverless">here</a></p>
        </section>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = 'https-headly48-github-io'; // required: replace example with your forum shortname
            var disqus_identifier = '';
         
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



        <footer class="post-footer">



            <section class="author">
                <h4><a href="../author/joshua/">Joshua Head</a></h4>

                    <p>Full stack developer in Melbourne Australia. Interested in learning new skills and working on new challenges</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Serverless%20-%20Making%20lambda%20deployments%20easy&amp;url=http://headly48.github.io/severless-making-lambda-deployments-easy/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://headly48.github.io/severless-making-lambda-deployments-easy/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://headly48.github.io/severless-making-lambda-deployments-easy/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>

    </article>

</main>

<aside class="read-next">
    <a class="read-next-story no-cover" href="../creating-a-crud-api-with-aws-lambda-and-dynamodb/">
        <section class="post">
            <h2>Creating a CRUD API with AWS lambda and dynamoDB</h2>
            <p>Intro The last few lambda functions I have created have been very basic in nature as they returned simple…</p>
        </section>
    </a>
    <a class="read-next-story prev no-cover" href="../aws-creating-my-first-lambda-function/">
        <section class="post">
            <h2>AWS - Creating my first lambda function</h2>
            <p>Since creating my AWS account a few days ago i have been dying to try out there lambda functions…</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="http://headly48.github.io">Josh's Tech Blog</a> © 2016</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=a8cb9de651"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=a8cb9de651"></script>

</body>
